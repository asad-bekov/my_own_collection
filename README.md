# Задание к занятию 6 «Создание собственных модулей»

>Репозиторий: my_own_collection\
>Выполнил: Асадбеков Асадбек\
>Дата выполнения: июль 2025

## Оглавление

* [Структура задания](#структура-задания)
* [Этапы выполнения](#этапы-выполнения)
  * [Установка и настройка окружения](#установка-и-настройка-окружения)
  * [Разработка модуля](#разработка-модуля)
  * [Тестирование модуля](#тестирование-модуля)
  * [Создание коллекции и роли](#создание-коллекции-и-роли)
  * [Тест установки и запуска коллекции](#тест-установки-и-запуска-коллекции)
  * [Скриншоты (авторазметка)](#скриншоты-авторазметка)
* [Ссылки на коллекцию и архив](#ссылки-на-коллекцию-и-архив)

---

## Структура задания

Реализована собственная ansible-collection с:

* Кастомным модулем для создания файла на хосте
* Ролью, использующей этот модуль
* Документацией и тестированием работы

---

## Этапы выполнения

### Установка и настройка окружения

1. Клонирование репозитория Ansible
2. Создание виртуального окружения, установка зависимостей
3. Настройка окружения для разработки

### Разработка модуля

* Написан кастомный Ansible-модуль `my_own_module.py`, который создаёт файл с заданным содержимым по нужному пути

### Тестирование модуля

* Проверена исполнимость модуля локально (с использованием переменной ANSIBLE\_MODULE\_ARGS и через playbook)
* Проведён тест идемпотентности

### Создание коллекции и роли

* Инициализирована коллекция `my_own_namespace.yandex_cloud_elk`
* Модуль помещён в коллекцию, реализована роль, использующая модуль с параметрами по умолчанию
* Оформлена документация
* Сделан git-тег и build tar.gz

### Тест установки и запуска коллекции

* Коллекция установлена из локального архива через `ansible-galaxy collection install ...`
* Запущен итоговый playbook — продемонстрирована работа роли и модуля

---

## Скриншоты (авторазметка)

### Установка зависимостей и настройка окружения

![Установка зависимостей и env-setup](https://github.com/asad-bekov/my_own_collection/blob/main/img/1.PNG)

### Первый запуск кастомного модуля через playbook

![Первый запуск кастомного модуля (changed=1)](https://github.com/asad-bekov/my_own_collection/blob/main/img/2.PNG)

### Проверка идемпотентности (повторный запуск playbook)

![Проверка идемпотентности (changed=0)](https://github.com/asad-bekov/my_own_collection/blob/main/img/3.PNG)

### Инициализация коллекции и структура

![Структура коллекции](https://github.com/asad-bekov/my_own_collection/blob/main/img/4.PNG)

### Пример итогового playbook для роли

![Пример playbook для роли](https://github.com/asad-bekov/my_own_collection/blob/main/img/5.PNG)

### Сборка архива коллекции

![Сборка коллекции (build)](https://github.com/asad-bekov/my_own_collection/blob/main/img/6.PNG)

### Установка коллекции из tar.gz

![Установка коллекции из архива](https://github.com/asad-bekov/my_own_collection/blob/main/img/7.PNG)

### Финальный запуск playbook из установленной коллекции

![Финальный запуск playbook](https://github.com/asad-bekov/my_own_collection/blob/main/img/8.PNG)

---

## Ссылки на коллекцию и архив

* [GitHub-репозиторий с коллекцией](https://github.com/asad-bekov/my_own_collection/tree/main/my_own_namespace/yandex_cloud_elk)
* [Ссылка на архив коллекции .tar.gz](https://github.com/asad-bekov/my_own_collection/releases/download/1.0.2/my_own_namespace-yandex_cloud_elk-1.0.2.tar.gz)

---

